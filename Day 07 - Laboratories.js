function day07a(input) {
  var rows = input.split(",");
  var width = rows[0].length;
  var height = rows.length;
  
  var beams = [];
  beams.push(rows[0].indexOf("S"));
  
  var timesSplit = 0;
  
  for (var row = 1; row < height; row++) {
    var newBeams = [];
    for (var col = 0; col < width; col++) {
      if (!arrayContains(beams, col)) { continue; }
      if (rows[row][col] !== "^") {
        if (!arrayContains(newBeams, col)) {
          newBeams.push(col);
        }
      } else {
        timesSplit++;
        if (col > 0 && !arrayContains(newBeams, col-1)) {
          newBeams.push(col-1);
        }
        if (col < width - 1 && !arrayContains(newBeams, col+1)) {
          newBeams.push(col+1);
        }
      }
    }
    beams = newBeams;
  }
  console.log(timesSplit);
}

function day07b(input) {
  var rows = input.split(",");
  var width = rows[0].length;
  var height = rows.length;
  
  var beams = [];
  beams.push( { "row": 1, "col": rows[0].indexOf("S"), "beamsHere": 1 });
  
  var timelines = 0;
  
  while (beams.length > 0) {
    var currentBeam = beams[0];
    beams = beams.slice(1);
    
    if (currentBeam.row === height) {
      timelines += currentBeam.beamsHere;
      continue;
    }
    
    if (rows[currentBeam.row][currentBeam.col] !== "^") {
      var otherBeam = indexOfBeam(beams, currentBeam.row + 1, currentBeam.col);
      if (otherBeam === -1) {
        beams.push( { "row": currentBeam.row + 1, "col": currentBeam.col, "beamsHere": currentBeam.beamsHere } );
      } else {
        beams[otherBeam].beamsHere += currentBeam.beamsHere;
      }
    } else {
      if (currentBeam.col > 0) {
        var otherBeam = indexOfBeam(beams, currentBeam.row + 1, currentBeam.col - 1);
        if (otherBeam === -1) {
          beams.push( { "row": currentBeam.row + 1, "col": currentBeam.col - 1, "beamsHere": currentBeam.beamsHere } );
        } else {
          beams[otherBeam].beamsHere += currentBeam.beamsHere;
        }
      }
      if (currentBeam.col < width - 1) {
        var otherBeam = indexOfBeam(beams, currentBeam.row + 1, currentBeam.col + 1);
        if (otherBeam === -1) {
          beams.push( { "row": currentBeam.row + 1, "col": currentBeam.col + 1, "beamsHere": currentBeam.beamsHere } );
        } else {
          beams[otherBeam].beamsHere += currentBeam.beamsHere;
        }
      }
    }
  }
  console.log(timelines);
}

function indexOfBeam(beams, row, col) {
  for (var i = 0; i < beams.length; i++) {
    if (beams[i].row === row && beams[i].col === col) {
      return i;
    }
  }
  return -1;
}

/** ========== Helper functions ========== */
// Arrays -- Also remember concat(array), slice( [start,end) ), and splice(index, numToRemove, itemsToAdd...)
function arrayContains(inputArr, val) { return inputArr.indexOf(val) !== -1; }
function arrayIntersection(array1, array2) { return array1.filter(value => array2.includes(value)); }
function removeItemFromArray(inputArr, val) { if (arrayContains(inputArr, val)) { inputArr.splice(inputArr.indexOf(val), 1); } }
// Strings
function replaceCharAt(inputStr, index, character) { return inputStr.substr(0, index) + character + inputStr.substr(index + 1); }
function cutOutCharAt(inputStr, index) { return inputStr.substr(0, index) + inputStr.substr(index + 1); }
function stringContains(inputStr, subStr) { return inputStr.indexOf(subStr) !== -1; }
// Binary
function bin2dec(bin) { return parseInt(bin, 2); }
function dec2bin(dec) { return (dec >>> 0).toString(2); }
// Other
function deepCopy(input) { return JSON.parse(JSON.stringify(input)); }
/** ====================================== */

//var dayInput = ".......S.......,...............,.......^.......,...............,......^.^......,...............,.....^.^.^.....,...............,....^.^...^....,...............,...^.^...^.^...,...............,..^...^.....^..,...............,.^.^.^.^.^...^.,...............";
var dayInput = "......................................................................S......................................................................,.............................................................................................................................................,......................................................................^......................................................................,.............................................................................................................................................,.....................................................................^.^.....................................................................,.............................................................................................................................................,....................................................................^...^....................................................................,.............................................................................................................................................,...................................................................^.^.^.^...................................................................,.............................................................................................................................................,..................................................................^.^...^.^..................................................................,.............................................................................................................................................,.................................................................^...^...^.^.................................................................,.............................................................................................................................................,................................................................^.^.^.^.^...^................................................................,.............................................................................................................................................,...............................................................^.^.^.........^...............................................................,.............................................................................................................................................,..............................................................^.^...^.^.^.^.^.^..............................................................,.............................................................................................................................................,.............................................................^.^...^.^.^.^.....^.............................................................,.............................................................................................................................................,............................................................^.^.......^.^.^.^.^.^............................................................,.............................................................................................................................................,...........................................................^...^...^.^.^.^.^...^.^...........................................................,.............................................................................................................................................,..........................................................^...^.^.^.^.^.^.....^.^.^..........................................................,.............................................................................................................................................,.........................................................^...^...^.^.^...^...^...^.^.........................................................,.............................................................................................................................................,........................................................^.^.^.^...^.^.^...........^.^........................................................,.............................................................................................................................................,.......................................................^...^...^.^.....^.^.........^.^.......................................................,.............................................................................................................................................,......................................................^.^.^...^...^.^.^.^.^.^.^.^.^.^.^......................................................,.............................................................................................................................................,.....................................................^.^...^.^.^.^.^...........^...^.^.^.....................................................,.............................................................................................................................................,....................................................^.^.....^.^.......^.^.^.^.^.^.^...^.^....................................................,.............................................................................................................................................,...................................................^.^.^.^.^.^...^...^.^...^.......^...^.^...................................................,.............................................................................................................................................,..................................................^.^.^.^...^.^.^.^.^.^...^.^.^...^...^.^.^..................................................,.............................................................................................................................................,.................................................^.^...^...^...^.^.^.^.^.^...^.....^.^.^.^.^.................................................,.............................................................................................................................................,................................................^.^.^.^.^.^...^.^.^.^...^.^.^...^.^.^.^.^.^.^................................................,.............................................................................................................................................,...............................................^.^...^.^.^.^.^.^.^.^.......^.^.^.^.^.......^.^...............................................,.............................................................................................................................................,..............................................^.^.^.^.^.^...^.^.^...^.^...^.^...^.^.....^.^.^.^..............................................,.............................................................................................................................................,.............................................^...^.^.^.^...^.^.^.^...^.^...^.......^.^.^.^.^.^.^.............................................,.............................................................................................................................................,............................................^.^.^.^.^.^.^...^.^.^.^.^.^.....^.^.^...^.^.^.^.^.^.^............................................,.............................................................................................................................................,...........................................^.^.^...^.^.....^.^.....^.^.^...^.^...^.^...^...^.^.^.^...........................................,.............................................................................................................................................,..........................................^.^...^.........^.^.^...........^.^.^.^.^.^...^.^...^.^.^..........................................,.............................................................................................................................................,.........................................^.^.......^.^...^.^.^.^.^.....^.^.......^.^.^.........^.^.^.........................................,.............................................................................................................................................,........................................^.^.^.^...^.^.....^.^.^.^.^.^.^.......^.^.....^...^.^.^.^...^........................................,.............................................................................................................................................,.......................................^...^...^.^.^.....^...^.^.^.^.^...^.^...^.......^.^.^.^...^.^.^.......................................,.............................................................................................................................................,......................................^.^.^.^.^.^...^.^.^.............^.....^.^.^.^...^...^...^.^.^.^.^......................................,.............................................................................................................................................,.....................................^.^...........^.^.^.^.^.^...^.^.........^.^.^.^.^.^...^.^...^.^.^.^.....................................,.............................................................................................................................................,....................................^.^.^.^...^...^.^.^...^.......^.^.^.^.^.^...^.^.^.^.^...^.^.^.^.^.^.^....................................,.............................................................................................................................................,...................................^.^.^.^.^.^.^.^...^.^.^.^...^...^...^.^...^...^...^.^...^.^.^.....^.^.^...................................,.............................................................................................................................................,..................................^.^...^...^...^.^.^.^.^...^.^.^.^.^.^...^.....^.^.^...^.^.....^.^...^.^.^..................................,.............................................................................................................................................,.................................^.^...^.^.^...^.^.^.....^.^.^.^.^.^.^...^.^.^.^.^.^.^.^...^.....^...^...^.^.................................,.............................................................................................................................................,................................^.^.^.........^...^.^.^.^...^.....^.^...^.^.^.^...^.....^.....^.^...^.^...^.^................................,.............................................................................................................................................,...............................^.^.^...^.^.......^.^.^.^...^.....^.^.^...^.^.^.^.....^.^...^...^.^...^...^.^.^...............................,.............................................................................................................................................,..............................^.^.^.^.^...^.^.^.^.^.^.^.^.^...^.^...^.....^...^...^...^.^.^.^.^...^.^.....^.^.^..............................,.............................................................................................................................................,.............................^.^.^...^.^.^.^.^.....^...^.^.^.........^.^.^.^.^...^.....^...^.^.^.^.^...^.^.^.^.^.............................,.............................................................................................................................................,............................^.^.^.^.^.^.........^...^.^.^.^.^.......^.^.^.^...^.........^...^.......^.....^.^...^............................,.............................................................................................................................................,...........................^...^.^.^.....^.^...^.......^.^.^.^.......^.^.^.....^.^...^...^.^.^.....^.^.^.....^...^...........................,.............................................................................................................................................,..........................^.^...^.^.^...^.^.^...^.^.^.^.^.^.^.^.^.^.^.^.^.^.......^.^.^...^...^...^.....^...^.^...^..........................,.............................................................................................................................................,.........................^...^.^.^...^.^.^.^.^.^.^...^...^...^.^.^.....^.^...^.^.^.^.^.^.^...^.....^.^.^.^.^.^.^.^.^.........................,.............................................................................................................................................,........................^...^.^.^.^.^.^...^.....^...^.^.^.^...^.^.^...^.^.^...^...^.^.^.^.^.^.^.^...^.^.^.....^.^...^........................,.............................................................................................................................................,.......................^...^.^...^.^.....^.^.^.^.^.^...^.^.^.^...^...^.^.....^...^.^.^.^.^...^.^...^.^.^...^...^.^.^.^.......................,.............................................................................................................................................,......................^.^...^.^.^...^...^...^.....^.^.^.^.^.^.^.........^...^.^...^...^...^.^.^...^...^.^.^.^.^.^.^.^.^......................,.............................................................................................................................................,.....................^...^.^.^...^...^.^.....^.^...^.^.^...^.^.^...^.^...^...^.^.^.^.^.^.^.^.^.^.^.^...^.^.^.^.^.^.....^.....................,.............................................................................................................................................,....................^.^.^.....^.^...^...^.....^.......^...^.^...^...^...^.....^.^...^.....^.^.^.^.^.^.^...^...^.^.......^....................,.............................................................................................................................................,...................^.^.^.^.^.....^.^.....^.^.^.^.^.^.^.^.^.^.^.^.......^.........^.......^.^.^.....^.^.^.^.^.^.^.^.^.^.^.^...................,.............................................................................................................................................,..................^.^.^.^.^.^.^.^.....^.^.^...^.^.^.^...^...^...^...^.^.^.^.^.^.^.^.......^.^.^.^...^.^.^.^.^...^.^...^...^..................,.............................................................................................................................................,.................^...^.^.^.^...^.^.^...^...^.^.^.^.....^.^.....^...^.^.^.....^.^...^.^.......^.^.^.^.....^...^.^.^.^.^.^.^.^.................,.............................................................................................................................................,................^.^...^.^...^.^.^.....^...^.^.^.^.....^.^.^...^.^.^.^.^.^.^.^.^.......^.^.^.^.^.......^.^...^...^.^.^...^.^.^................,.............................................................................................................................................,...............^.^.......^.^.^...^.^.......^.^.^.^.....^.^.....^.^.^...^...^.^.^...^.^...^.^.^.^...^.^.^.^.^...^.^.^...^...^.^...............,.............................................................................................................................................,..............^...^.^.^.^.......^.^...^.^...^...^...^...^.^...^.^.^.^.^.......^.^.^...^.^.^.^.....^.^.^.....^.^...^.^...^.^.^.^..............,.............................................................................................................................................,.............^.^...^.^.^.....^.....^.....^.^.^...^.^.^.^.^.^.^.^.....^.^...^.^.^...^.^...^...^.......^.^.^.^...^.^.....^...^.^.^.............,.............................................................................................................................................,............^...^.^.......^.............^.^.......^...^.^...^.^.^.^.^...^...^.^.^.....^.^.^.^.^.^...^.^.^.^.^...^.^.^.^.....^.^.^............,.............................................................................................................................................,...........^.^.^.....^.^.^.^.^.^.......^.^.^.^.^.^.^...^.^.^...^.^.^...^...^.^.^.^.^.^...^.^.^.^...^.^.......^.^.^...............^...........,.............................................................................................................................................,..........^.^.^.......^.^...^.^.^...^.^.^.^.....^.^...^.^...^.^.^...^.^.^.^...^.^.^.^...^.^.....^.....^.^.^.....^.^.^.............^..........,.............................................................................................................................................,.........^.^.^.^.^.^.^...^...^.^.^...^.^.^.....^.^.^.^.^.^.........^.^...^.^.^...^.^.^.^.....^.^.^.^.....^...^.....^.^.^.^.^...^.^.^.........,.............................................................................................................................................,........^.^...^.^...^.^.....^.^...^.^.^.........^...^.^.^.....^.^.^.^.^.^.....^.^.....^.^.^.^.....^.^...^.^.^.^.^.^.^.^.....^.^...^.^........,.............................................................................................................................................,.......^.^.^.^.^...^.^...^.^.......^.^...^.^.^.......^...^.^.^.^...^...........^.^.^.^.....^...^...^...^.^.^...^.^.......^.^.^...^.^.^.......,.............................................................................................................................................,......^...^...^.^.^.^.^.^...^...^.^...^...^.^.^.^.^...^.^.^.^.^.^.....^.^.^.^...^.......^.^.^.^.^...^.^.^.^.^.^.^.^.^.^.^.^.^.^.^...^.^......,.............................................................................................................................................,.....^.^...^.....^...^.^.^.^.^...^.^.^.^.....^.^.^.^.^.^.......^.^.^.^...^.....^.^.^.^.^.^.^.^.^.^.^...^...^.^...^.^...^...^.^.^.^.^.^.^.....,.............................................................................................................................................,....^...^.^.^.^...^.^.^.^.^.^.^.^.^.^.^...^...^.^.....^...^.^.......^.^.^.^.....^.^.^...^.^.^...^.....^.........^.^...^.^.^.........^.^.^....,.............................................................................................................................................,...^.^.^.^.^.......^.^.^.^.^...^...^...^...^.^...^.^.^.^.^...^...^...^.^...^.^.^...^.^.^.^.........^.^...^.^...........^.....^...^...^.^.^...,.............................................................................................................................................,..^.^.^...^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^...^.^.^.^...^.....^...^.^.^.^.^.^.^...^.^.^...^.^.^.^.^.^.^.^...^...^.^.^.^.....^.^.^.^.^.^...^.^..,.............................................................................................................................................,.^.....^.^...^.^.^.....^.^.....^.^...^.^.^.^.^.^.^.^.^.^...^.^...^.....^.^.....^...^.^.^.....^...^.^...^...^.^.....^.^.^.....^...^.^.^.^.^.^.,.............................................................................................................................................";

//day07a(dayInput);
day07b(dayInput);
